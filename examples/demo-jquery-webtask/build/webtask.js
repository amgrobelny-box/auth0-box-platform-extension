module.exports=function(n){function e(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var t={};return e.m=n,e.c=t,e.i=function(n){return n},e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:o})},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=3)}([function(n,e,t){"use strict";var o=t(4);n.exports=function(n,e){e.send(o.render('\n  <html>\n    <head>\n      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">\n      <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.5/flatly/bootstrap.min.css">\n    </head>\n    <body style="margin-bottom: 50px;">\n      <div class="jumbotron">\n        <div class="container text-center">\n          <h1>Auth0 - Box Platform Demo</h1>\n        </div>\n      </div>\n      <div class="container">\n        <div class="row">\n          <div class="col-sm-12 col-md-9">\n            <h2>Authorization</h2>\n              <p>Press <strong>Login</strong> to authenticate with an Auth0 user and request access to the Box Platform.</p>\n              <div>\n                <button id="login" class="btn btn-primary" style="margin-right: 10px;">Login</button>\n              </div>\n          </div>\n          <div class="col-sm-12 col-md-9" style="margin-top: 10px;">\n            <pre class="hidden" id="error-contents"></pre>\n          </div>\n        </div>\n        <div id="token-details" class="row hidden">\n          <div class="col-sm-12 col-md-9">\n            <h2>Token</h2>\n            <p>Here is the <strong>id_token</strong> issued by Auth0.</p>\n            <pre id="id-token"></pre>\n            <p>And these are the contents of the <strong>id_token</strong>.</p>\n            <pre id="id-token-contents"></pre>\n            <p>Here is the <strong>access_token</strong> issued by Auth0.</p>\n            <pre id="access-token"></pre>\n\n            <h2>Box</h2>\n            <p>\n              More information about the Box Platform API can be found <a href="https://developer.box.com/reference#api-docs-directory">here</a>.\n            </p>\n            <button id="get-token" class="btn btn-success" style="margin-right: 10px;">Get Box Token</button>\n            <button id="call-box" class="btn btn-warning" style="margin-right: 10px;">Call Box (/2.0/users/me)</button>\n            <pre id="api-response" class="hidden" style="margin-top: 10px;"></pre>\n          </div>\n        </div>\n      </div>\n      <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.js"><\/script>\n      <script src="//cdn.auth0.com/js/auth0/8.3.0/auth0.min.js"><\/script>\n      <script type="text/javascript">\n        var auth0 = new auth0.WebAuth({\n          domain: \'<%= AUTH0_DOMAIN %>\',\n          clientID: \'<%= AUTH0_CLIENT_ID %>\'\n        });\n\n        auth0.parseHash(function(err, data) {\n          if (err) {\n            $(\'#error-contents\').removeClass(\'hidden\');\n            $(\'#error-contents\').text(JSON.stringify(err, null, 2));\n            return;\n          }\n\n          if (data) {\n            $(\'#token-details\').removeClass(\'hidden\');\n            $(\'#access-token\').text(data.accessToken);\n            $(\'#id-token\').text(data.idToken);\n            $(\'#id-token-contents\').text(JSON.stringify(data.idTokenPayload, null, 2));\n\n            window.location.hash = \'\';\n          }\n        });\n\n        $(function () {\n          $(\'#login\').click(function(e) {\n            e.preventDefault();\n\n            auth0.authorize({\n              audience: \'urn:box-platform-api\',\n              scope: \'openid name email get:token\',\n              responseType: \'token id_token\',\n              redirectUri: window.location.href\n            });\n          })\n\n          var boxAccessToken = null;\n\n          $(\'#get-token\').click(function(e) {\n            e.preventDefault();\n\n            $.ajax({\n                cache: false,\n                url: "<%= BOX_DELEGATION_ENDPOINT %>",\n                headers: { "Authorization": "Bearer " + $(\'#access-token\').text() }\n            })\n            .done(function(data) {\n              boxAccessToken = data.access_token;\n              $(\'#api-response\').text(JSON.stringify(data, null, 2));\n            })\n            .fail(function(xhr) {\n              $(\'#api-response\').text(JSON.stringify(xhr.responseJSON, null, 2));\n            })\n            .always(function() {\n              $(\'#api-response\').removeClass(\'hidden\');\n            });\n          });\n\n          $(\'#call-box\').click(function(e) {\n            e.preventDefault();\n\n            $.ajax({\n                cache: false,\n                url: "https://api.box.com/2.0/users/me",\n                headers: { "Authorization": "Bearer " + boxAccessToken }\n            })\n            .done(function(data) {\n              console.log(data);\n              $(\'#api-response\').text(JSON.stringify(data, null, 2));\n            })\n            .fail(function(xhr) {\n              console.log(data);\n              $(\'#api-response\').text(JSON.stringify(xhr.responseJSON, null, 2));\n            })\n            .always(function() {\n              $(\'#api-response\').removeClass(\'hidden\');\n            });\n          });\n        });\n      <\/script>\n    </body>\n  </html>',{AUTH0_DOMAIN:n.webtaskContext.secrets.AUTH0_DOMAIN,AUTH0_CLIENT_ID:n.webtaskContext.secrets.AUTH0_CLIENT_ID,BOX_DELEGATION_ENDPOINT:n.webtaskContext.secrets.BOX_DELEGATION_ENDPOINT}))}},function(n,e){n.exports=require("express@4.14.0")},function(n,e){n.exports=require("webtask-tools")},function(n,e,t){"use strict";var o=t(1),s=t(2),r=t(0),i=o();i.get("/",r),n.exports=s.fromExpress(i)},function(n,e){n.exports=require("ejs@2.3.1")}]);